<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayerController Script - Game Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ğŸ® PlayerController Script</h1>
        <p>Ana Karakter Kontrol Sistemi</p>
    </header>
    <nav>
        <ul class="nav-links">
            <li><a href="./documentation.html">ğŸ  Ana Sayfa</a></li>
            <li class="dropdown">
                <a href="#">ğŸ‘¤ Player Scripts</a>
                <div class="dropdown-content">
                    <a href="./playerMovement.html">ğŸƒâ€â™‚ï¸ Player Movement</a>
                    <a href="./dashController.html">âš¡ Dash Controller</a>
                    <a href="./groundChecker.html">ğŸŒ Ground Checker</a>
                    <a href="./shootingSystem.html">ğŸ¯ Shooting System</a>
                    <a href="./projectile.html">ğŸ’¨ Projectile</a>
                    <a href="./arrowProjectileStrategy.html">ğŸ¹ Arrow Strategy</a>
                    <a href="./iPlayerInterfaces.html">ğŸ”— Player Interfaces</a>
                </div>
            </li>
            <li class="dropdown">
                <a href="#">ğŸ‘¾ Enemy Scripts</a>
                <div class="dropdown-content">
                    <a href="./baseEnemy.html">ğŸ‘¾ Base Enemy</a>
                    <a href="./enemySpawner.html">ğŸ”„ Enemy Spawner</a>
                    <a href="./enemyFactory.html">ğŸ­ Enemy Factory</a>
                    <a href="./enemyProjectile.html">ğŸ¯ Enemy Projectile</a>
                    <a href="./meleeEnemy.html">âš”ï¸ Melee Enemy</a>
                    <a href="./rangedEnemy.html">ğŸ¹ Ranged Enemy</a>
                    <a href="./meleeAttackStrategy.html">ğŸ—¡ï¸ Melee Strategy</a>
                    <a href="./rangedAttackStrategy.html">ğŸ¯ Ranged Strategy</a>
                    <a href="./iAttackStrategy.html">ğŸ“‹ Attack Strategy Interface</a>
                    <a href="./iEnemy.html">ğŸ“‹ Enemy Interface</a>
                </div>
            </li>
        </ul>
    </nav>
    <main>
        <section class="script-section">
            <div class="script-header">
                <h2>ğŸ® PlayerController.cs</h2>
                <div class="tags">
                    <span class="tag">ğŸ® Ana Kontrol</span>
                    <span class="tag">ğŸƒ Hareket</span>
                    <span class="tag">ğŸ¯ Kontrol</span>
                </div>
            </div>

            <div class="code-block">
                <button class="copy-button">Copy</button>
                <pre><code class="language-csharp">
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    [Header("Movement Settings")]
    [SerializeField] private float moveSpeed = 5f;
    [SerializeField] private Joystick joystick;
    [SerializeField] private Transform cameraTransform;

    [SerializeField] private IMoveable _movement;
    [SerializeField] private IGroundChecker _groundChecker;
    [SerializeField] private IMaterialScroller _materialScroller;
    [SerializeField] private DashController _dashController;
    [SerializeField] private IInputHandler[] _inputHandlers;
    [SerializeField] private IShooter _shooter;

    private void Awake()
    {
        InitializeComponents();
    }

    private void InitializeComponents()
    {
        _movement = GetComponent<PlayerMovement>();
        _groundChecker = GetComponent<GroundChecker>();
        _materialScroller = GetComponent<MaterialScroller>();
        _dashController = GetComponent<DashController>();
        _shooter = GetComponent<ShootingSystem>();

        _inputHandlers = new IInputHandler[]
        {
            new JoystickInput(joystick),
            new KeyboardInput()
        };
    }

    private void Update()
    {
        if (Input.GetKeyDown(KeyCode.R))
        {
            ResetRotation();
        }
        if (Input.GetKeyDown(KeyCode.E) && _shooter != null)
        {
            HandleShooting();
        }
    }

    private void FixedUpdate()
    {
        HandleMovement();
    }

    private void HandleMovement()
    {
        _groundChecker.CheckGround();
        if (!_groundChecker.IsGrounded) return;

        Vector3 inputDirection = GetActiveInputDirection();
        if (inputDirection.magnitude >= 0.1f)
        {
            Vector3 moveDirection = CalculateMoveDirection(inputDirection);
            float currentSpeed = CalculateCurrentSpeed();

            _movement.Move(moveDirection, currentSpeed);
            _movement.Rotate(moveDirection);
            _materialScroller.ScrollMaterial(moveDirection);
        }
    }

    private void HandleShooting()
    {
        Vector3 shootDirection = transform.forward;
        _shooter.Shoot(shootDirection);
    }

    private Vector3 GetActiveInputDirection()
    {
        foreach (var inputHandler in _inputHandlers)
        {
            if (inputHandler.HasInput)
            {
                return inputHandler.GetMovementInput();
            }
        }
        return Vector3.zero;
    }

    private Vector3 CalculateMoveDirection(Vector3 inputDirection)
    {
        Vector3 cameraForward = cameraTransform.forward;
        Vector3 cameraRight = cameraTransform.right;

        cameraForward.y = 0f;
        cameraRight.y = 0f;

        return (cameraForward.normalized * inputDirection.z +
                cameraRight.normalized * inputDirection.x).normalized;
    }

    private float CalculateCurrentSpeed()
    {
        return _dashController != null && _dashController.IsDashing
            ? _dashController.DashSpeed
            : moveSpeed;
    }

    private void ResetRotation()
    {
        transform.rotation = Quaternion.Euler(0, transform.rotation.eulerAngles.y, 0);
    }
}
                </code></pre>
            </div>

            <div class="explanation-block">
                <h3>ğŸ“ Kod AÃ§Ä±klamasÄ±</h3>
                <ul>
                    <li>ğŸ¯ <strong>Temel AmaÃ§:</strong> Oyuncunun tÃ¼m hareketlerini ve aksiyonlarÄ±nÄ± yÃ¶neten ana kontrol scripti</li>
                    <li>ğŸ”§ <strong>Teknik Detaylar:</strong>
                        <ul>
                            <li>BaÄŸÄ±mlÄ±lÄ±k enjeksiyonu ile modÃ¼ler yapÄ±</li>
                            <li>Ã‡oklu giriÅŸ sistemi desteÄŸi (Joystick ve Klavye)</li>
                            <li>Kamera bazlÄ± hareket sistemi</li>
                        </ul>
                    </li>
                </ul>

                <div class="method-item">
                    <h4>âš™ï¸ Ã–nemli BileÅŸenler</h4>
                    <ul>
                        <li><strong>IMoveable:</strong> Hareket sistemi</li>
                        <li><strong>IGroundChecker:</strong> Zemin kontrolÃ¼</li>
                        <li><strong>IMaterialScroller:</strong> Materyal efektleri</li>
                        <li><strong>DashController:</strong> Dash yeteneÄŸi</li>
                        <li><strong>IShooter:</strong> AtÄ±ÅŸ sistemi</li>
                    </ul>
                </div>

                <div class="method-item">
                    <h4>ğŸ”„ Ana Metodlar</h4>
                    <ul>
                        <li><strong>HandleMovement():</strong>
                            <ul>
                                <li>Zemin kontrolÃ¼</li>
                                <li>GiriÅŸ yÃ¶nÃ¼ hesaplama</li>
                                <li>Hareket ve rotasyon uygulama</li>
                                <li>Materyal efektlerini gÃ¼ncelleme</li>
                            </ul>
                        </li>
                        <li><strong>HandleShooting():</strong>
                            <ul>
                                <li>Karakterin baktÄ±ÄŸÄ± yÃ¶ne ateÅŸ etme</li>
                                <li>AtÄ±ÅŸ sistemini tetikleme</li>
                            </ul>
                        </li>
                        <li><strong>CalculateMoveDirection():</strong>
                            <ul>
                                <li>Kamera yÃ¶nÃ¼ne gÃ¶re hareket hesaplama</li>
                                <li>Y eksenini sÄ±fÄ±rlayarak dÃ¼zgÃ¼n hareket</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="implementation-notes">
                    <h4>ğŸ’¡ Uygulama NotlarÄ±</h4>
                    <ul>
                        <li>SOLID prensiplerine uygun modÃ¼ler tasarÄ±m</li>
                        <li>ArayÃ¼zler Ã¼zerinden baÄŸÄ±mlÄ±lÄ±k yÃ¶netimi</li>
                        <li>Ã‡oklu platform desteÄŸi (PC ve Mobil)</li>
                        <li>GeniÅŸletilebilir giriÅŸ sistemi</li>
                        <li>Kamera bazlÄ± hareket ile daha iyi oyun deneyimi</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-csharp.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Copy button functionality
            document.querySelectorAll('.copy-button').forEach(button => {
                button.addEventListener('click', function() {
                    const codeBlock = this.nextElementSibling.querySelector('code');
                    navigator.clipboard.writeText(codeBlock.textContent);
                    
                    const originalText = this.textContent;
                    this.textContent = 'Copied!';
                    setTimeout(() => {
                        this.textContent = originalText;
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html> 